<project name='edu:umn:cs:melt:ableJ14:composed:java_foreach:bin' default='dist' basedir='.'>
  <description>Build the grammar edu:umn:cs:melt:ableJ14:composed:java_foreach:bin </description>

  <property environment='env'/>
  <property name='jg' location='/Users/lijesh/svn/silver/trunk/generated/'/>
  <property name='sh' location='/Users/lijesh/svn/silver/trunk/jars/'/>
  <property name='bin' location='${jg}/bin'/>
  <property name='src' location='${jg}/src'/>

  <path id='lib.classpath'>
    <fileset dir='${sh}' includes='SilverRuntime.jar CopperRuntime.jar CopperCompiler.jar' />
  </path>

  <path id='src.classpath'>
    <pathelement location='${src}' />
  </path>

  <path id='compile.classpath'>
    <path refid='src.classpath'/>
    <path refid='lib.classpath'/>
  </path>

  <taskdef name='copper' classname='edu.umn.cs.melt.copper.ant.CopperAntTask' classpathref='lib.classpath'/>


  <target name='init'>

    <!-- Create the time stamp -->
    <tstamp>
      <format property='TIME' pattern='MM/dd/yyyy hh:mm aa'/>
    </tstamp>

    <mkdir dir='${bin}'/>
  </target>

  <target name='dist' depends='grammars'>

    <pathconvert refid='lib.classpath' pathsep=' ' property='man.classpath' />
    <jar destfile='edu.umn.cs.melt.ableJ14.composed.java_foreach.bin.jar' basedir='${bin}'>
       <include name='edu/umn/cs/melt/ableJ14/composed/java_foreach/bin/*.class' />
       <include name='core/*.class' />
       <include name='edu/umn/cs/melt/ableJ14/composed/java_foreach/*.class' />
       <include name='edu/umn/cs/melt/ableJ14/exts/foreach/*.class' />
       <include name='edu/umn/cs/melt/ableJ14/terminals/*.class' />
       <include name='edu/umn/cs/melt/ableJ14/concretesyntax/*.class' />
       <include name='edu/umn/cs/melt/ableJ14/abstractsyntax/*.class' />
       <include name='edu/umn/cs/melt/ableJ14/host/*.class' />
       <include name='edu/umn/cs/melt/ableJ14/driver/lazy/*.class' />
       <include name='silver/driver/*.class' />
       <include name='silver/definition/core/*.class' />
       <include name='silver/definition/regex/*.class' />
       <include name='silver/definition/env/*.class' />
       <include name='silver/definition/env/parser/*.class' />
       <include name='silver/definition/type/anytype/*.class' />
       <include name='silver/definition/type/io/*.class' />
       <include name='silver/util/*.class' />
       <include name='silver/util/command/*.class' />
       <include name='edu/umn/cs/melt/ableJ14/host/exts/parameterized_expr_block/*.class' />
      <manifest>
       <attribute name='Main-Class' value='edu.umn.cs.melt.ableJ14.composed.java_foreach.bin.Main' />
       <attribute name='Class-Path' value='${man.classpath}' />
       <attribute name='Built-By' value='${user.name}' />
       <section name='version'>
         <attribute name='Specification-Version' value='' />
         <attribute name='Implementation-Version' value='${TIME}' />
       </section>
      </manifest>
    </jar>

  </target>

  <target name='grammars' depends='init, copper'>
      <javac debug='on' source='1.5' classpathref='compile.classpath' srcdir='${src}' destdir='${bin}'>
       <include name='edu/umn/cs/melt/ableJ14/composed/java_foreach/bin/*.java' />
       <include name='core/*.java' />
       <include name='edu/umn/cs/melt/ableJ14/composed/java_foreach/*.java' />
       <include name='edu/umn/cs/melt/ableJ14/exts/foreach/*.java' />
       <include name='edu/umn/cs/melt/ableJ14/terminals/*.java' />
       <include name='edu/umn/cs/melt/ableJ14/concretesyntax/*.java' />
       <include name='edu/umn/cs/melt/ableJ14/abstractsyntax/*.java' />
       <include name='edu/umn/cs/melt/ableJ14/host/*.java' />
       <include name='edu/umn/cs/melt/ableJ14/driver/lazy/*.java' />
       <include name='silver/driver/*.java' />
       <include name='silver/definition/core/*.java' />
       <include name='silver/definition/regex/*.java' />
       <include name='silver/definition/env/*.java' />
       <include name='silver/definition/env/parser/*.java' />
       <include name='silver/definition/type/anytype/*.java' />
       <include name='silver/definition/type/io/*.java' />
       <include name='silver/util/*.java' />
       <include name='silver/util/command/*.java' />
       <include name='edu/umn/cs/melt/ableJ14/host/exts/parameterized_expr_block/*.java' />
      </javac>
  </target>

  <target name='copper'>
    <copper fullClassName='edu.umn.cs.melt.ableJ14.composed.java_foreach.Parser_edu_umn_cs_melt_ableJ14_composed_java_foreach_parse' inputFile='${src}/edu/umn/cs/melt/ableJ14/composed/java_foreach/Parser_edu_umn_cs_melt_ableJ14_composed_java_foreach_parse.copper' outputFile='${src}/edu/umn/cs/melt/ableJ14/composed/java_foreach/Parser_edu_umn_cs_melt_ableJ14_composed_java_foreach_parse.java' skin='xml' warnUselessNTs='no' dump='true' dumpType='html' dumpOnlyOnError='true' dumpFile='Parser_edu_umn_cs_melt_ableJ14_composed_java_foreach_parse.copperdump.html'/>
    <copper fullClassName='edu.umn.cs.melt.ableJ14.host.Parser_edu_umn_cs_melt_ableJ14_host_hostParse' inputFile='${src}/edu/umn/cs/melt/ableJ14/host/Parser_edu_umn_cs_melt_ableJ14_host_hostParse.copper' outputFile='${src}/edu/umn/cs/melt/ableJ14/host/Parser_edu_umn_cs_melt_ableJ14_host_hostParse.java' skin='xml' warnUselessNTs='no' dump='true' dumpType='html' dumpOnlyOnError='true' dumpFile='Parser_edu_umn_cs_melt_ableJ14_host_hostParse.copperdump.html'/>
  </target>


</project>
